# ProcessMind Backend Environment Configuration
# Copy this file to .env and update with your actual values

# Server Configuration
NODE_ENV=production
PORT=5000
APP_NAME=ProcessMind
API_VERSION=v1

# Frontend URL (for CORS)
FRONTEND_URL=https://yourdomain.com
CORS_ORIGIN=https://yourdomain.com

# Database Configuration (MongoDB Atlas or Remote Server)
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/processmind?retryWrites=true&w=majority
MONGODB_MAX_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=10
MONGODB_READ_PREFERENCE=primaryPreferred
LOG_CONNECTION_STATS=false

# Redis Configuration (Local on VPS)
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TLS=false
REDIS_CLUSTER=false

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-refresh-secret-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=30d
SESSION_SECRET=your-session-secret-change-this-in-production
BCRYPT_ROUNDS=10

# OpenAI API Configuration
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_ORG_ID=
WHISPER_MODEL=whisper-1
GPT_MODEL=gpt-3.5-turbo
MAX_TOKENS=4000
TEMPERATURE=0.7

# File Upload Configuration
UPLOAD_PATH=./uploads
UPLOAD_TEMP_PATH=./uploads/temp
UPLOAD_PROCESSED_PATH=./uploads/processed
MAX_FILE_SIZE=524288000  # 500MB in bytes
ALLOWED_VIDEO_FORMATS=mp4,mov,avi,mkv,webm,flv,wmv,mpg,mpeg,3gp,m4v
ALLOWED_AUDIO_FORMATS=mp3,wav,aac,flac,ogg,m4a,wma
UPLOAD_DIR=uploads

# FFmpeg Settings
FFMPEG_PATH=/usr/bin/ffmpeg
VIDEO_CODEC=libx264
AUDIO_CODEC=aac
VIDEO_CRF=28
VIDEO_PRESET=medium
MAX_VIDEO_DURATION=7200
VIDEO_MAX_WIDTH=1920
VIDEO_MAX_HEIGHT=1080

# AWS S3 Configuration (Optional - for production file storage)
STORAGE_TYPE=local
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=eu-central-1
S3_BUCKET_NAME=processmind-uploads
S3_ENDPOINT=
USE_S3=false

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password
EMAIL_FROM="ProcessMind <noreply@processmind.com>"
EMAIL_REPLY_TO=support@processmind.com
EMAIL_PROVIDER=smtp
SUPPORT_EMAIL=support@processmind.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
UPLOAD_RATE_LIMIT_WINDOW_MS=3600000  # 1 hour
UPLOAD_RATE_LIMIT_MAX_REQUESTS=10

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_FILE_PATH=./logs/combined.log
ERROR_LOG_PATH=./logs/error.log

# Super Admin Configuration
SUPER_ADMIN_EMAIL=admin@processmind.com
SUPER_ADMIN_PASSWORD_HASH=
SUPER_ADMIN_SECRET=change-this-super-admin-secret
SUPER_ADMIN_TOKEN_EXPIRES=4h
# Optional: Comma-separated IP whitelist
# SUPER_ADMIN_ALLOWED_IPS=127.0.0.1,192.168.1.100

# Queue Workers
DISABLE_WORKERS=false
BULL_REDIS_URL=redis://redis:6379
MAX_CONCURRENT_VIDEO_JOBS=3
MAX_CONCURRENT_AI_JOBS=5
JOB_ATTEMPTS=3
JOB_BACKOFF_DELAY=10000

# Stripe Configuration
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_PRICE_ID_FREE=price_free_id
STRIPE_PRICE_ID_PRO=price_pro_id
STRIPE_PRICE_ID_TEAM=price_team_id
PRO_PLAN_PRICE_PER_USER=10

# Multi-Tenant Configuration
ENABLE_MULTI_TENANT=true
DEFAULT_TENANT_ID=default

# Security
HELMET_CSP=true
TRUST_PROXY=true
SECURE_COOKIES=true
COOKIE_DOMAIN=.processmind.com

# Feature Flags
ENABLE_VIDEO_COMPRESSION=true
ENABLE_AI_ANALYSIS=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_PUBLIC_SHARING=true
ENABLE_TEAM_FEATURES=true

# Performance
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
ENABLE_CACHE=true
CACHE_TTL=3600

# Maintenance
ENABLE_MIDNIGHT_CLEANUP=true
CLEANUP_TEMP_FILES_AGE_HOURS=24